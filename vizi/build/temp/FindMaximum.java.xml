<?xml version="1.0" encoding="WINDOWS-1251"?>
<file xmlns:java="http://xml.apache.org/xalan/java" package="ru.ifmo.vizi.find_max">
<import>ru.ifmo.vizi.base.auto.*</import>
<import>java.util.Locale</import>
<class header="public final class FindMaximum extends BaseAutomataWithListener">
<variable header="public final Data d = new Data();" comment="Модель данных."/>
<method header="public FindMaximum(Locale locale)" comment="Конструктор для языка">
<line value="super(&quot;ru.ifmo.vizi.find_max.Comments&quot;, locale);"/>
<line>init(new Main(), d);</line>
</method>
<class header="public final class Data" comment="Данные.">
<variable comment="Массив для поиска.">public int[] a = new int[]{1, 2, 3, 1, 3, 5, 6};</variable>
<variable comment="Экземпляр апплета.">public FindMaximumVisualizer visualizer = null;</variable>
<variable comment="Текущий максимум.">public int max = 0;</variable>
<variable comment="Переменная цикла (Процедура Main).">public int Main_i;</variable>
<method header="public String toString()">StringBuffer s = new StringBuffer();
s.append("max = ").append(d.max).append("\n");
s.append("i = ").append(d.Main_i).append("\n");
return s.toString();</method>
</class>
<class header="private final class Main extends BaseAutomata implements Automata" comment="Ищет максимум в массиве.">
<variable comment="Начальное состояние автомата.">private final int START_STATE = 0;</variable>
<variable comment="Конечное состояние автомата.">private final int END_STATE = 8;</variable>
<method header="public Main()" comment="Конструктор.">
<line>super(</line>
<line value="    &quot;Main&quot;,"/>
<line>    0, // Номер начального состояния</line>
<line value="    8, // Номер конечного состояния"/>
<line>    new String[]{</line>
<line>        "Начальное состояние", </line>
<line value="        &quot;Инициализация&quot;,"/>
<line value="        &quot;Начало цикла&quot;,"/>
<line value="        &quot;Цикл&quot;,"/>
<line value="        &quot;Условие&quot;,"/>
<line value="        &quot;Условие (окончание)&quot;,"/>
<line value="        &quot;Обновление максимума&quot;,"/>
<line value="        &quot;Инкремент&quot;,"/>
<line>        "Конечное состояние"</line>
<line>    }, new int[]{</line>
<line>        Integer.MAX_VALUE, // Начальное состояние, </line>
<line value="        0, // Инициализация"/>
<line value="        -1, // Начало цикла"/>
<line value="        -1, // Цикл"/>
<line value="        0, // Условие"/>
<line value="        -1, // Условие (окончание)"/>
<line value="        0, // Обновление максимума"/>
<line value="        -1, // Инкремент"/>
<line>        Integer.MAX_VALUE, // Конечное состояние</line>
<line>    }</line>
<line>);</line>
</method>
<method header="protected void doStepForward(int level)" comment="Сделать один шаг автомата в перед.">
<switch header="state" comment="Переход в следующее состояние">
<case label="START_STATE" comment="Начальное состояние">
<line value="state = 1;" comment="Инициализация"/>
</case>
<case label="1" comment="Инициализация">
<line value="state = 2;" comment="Начало цикла"/>
</case>
<case label="2" comment="Начало цикла">
<line>stack.pushBoolean(false);</line>
<line value="state = 3;" comment="Цикл"/>
</case>
<case label="3" comment="Цикл">
<if test="d.Main_i &lt; d.a.length">
<then>
<line value="state = 4;" comment="Условие"/>
</then>
<else>
<line value="state = END_STATE;" comment=""/>
</else>
</if>
</case>
<case label="4" comment="Условие">
<if test="d.max &lt; d.a[d.Main_i]">
<then>
<line value="state = 6;" comment="Обновление максимума"/>
</then>
<else>
<line>stack.pushBoolean(false);</line>
<line value="state = 5;" comment="Условие (окончание)"/>
</else>
</if>
</case>
<case label="5" comment="Условие (окончание)">
<line value="state = 7;" comment="Инкремент"/>
</case>
<case label="6" comment="Обновление максимума">
<line>stack.pushBoolean(true);</line>
<line value="state = 5;" comment="Условие (окончание)"/>
</case>
<case label="7" comment="Инкремент">
<line>stack.pushBoolean(true);</line>
<line value="state = 3;" comment="Цикл"/>
</case>
</switch>
<switch header="state" comment="Действие в текущем состоянии">
<case label="1" comment="Инициализация">d.max = 0;</case>
<case label="2" comment="Начало цикла">d.Main_i = 0;</case>
<case label="3" comment="Цикл"/>
<case label="4" comment="Условие"/>
<case label="5" comment="Условие (окончание)"/>
<case label="6" comment="Обновление максимума">// @!max
stack.pushInteger(d.max);
d.max = d.a[d.Main_i];</case>
<case label="7" comment="Инкремент">d.Main_i++;</case>
</switch>
</method>
<method header="protected void doStepBackward(int level)" comment="Сделать один шаг автомата назад.">
<switch header="state" comment="Обращение действия в текущем состоянии">
<case label="1" comment="Инициализация"/>
<case label="2" comment="Начало цикла"/>
<case label="3" comment="Цикл"/>
<case label="4" comment="Условие"/>
<case label="5" comment="Условие (окончание)"/>
<case label="6" comment="Обновление максимума">// @?max
d.max = stack.popInteger();</case>
<case label="7" comment="Инкремент">d.Main_i--;</case>
</switch>
<switch header="state" comment="Переход в предыдущее состояние">
<case label="1" comment="Инициализация">
<line value="state = START_STATE;" comment=""/>
</case>
<case label="2" comment="Начало цикла">
<line value="state = 1;" comment="Инициализация"/>
</case>
<case label="3" comment="Цикл">
<if test="stack.popBoolean()">
<then>
<line value="state = 7;" comment="Инкремент"/>
</then>
<else>
<line value="state = 2;" comment="Начало цикла"/>
</else>
</if>
</case>
<case label="4" comment="Условие">
<line value="state = 3;" comment="Цикл"/>
</case>
<case label="5" comment="Условие (окончание)">
<if test="stack.popBoolean()">
<then>
<line value="state = 6;" comment="Обновление максимума"/>
</then>
<else>
<line value="state = 4;" comment="Условие"/>
</else>
</if>
</case>
<case label="6" comment="Обновление максимума">
<line value="state = 4;" comment="Условие"/>
</case>
<case label="7" comment="Инкремент">
<line value="state = 5;" comment="Условие (окончание)"/>
</case>
<case label="END_STATE" comment="Начальное состояние">
<line value="state = 3;" comment="Цикл"/>
</case>
</switch>
</method>
<method header="public String getComment()" comment="Комментарий к текущему состоянию">
<line>String comment = "";</line>
<line>Object[] args = null;</line>
<switch header="state" comment="Выбор комментария">
<case label="START_STATE" comment="Начальное состояние">
<line value="comment = FindMaximum.this.getComment(&quot;Main.START_STATE&quot;);"/>
</case>
<case label="1" comment="Инициализация">
<line value="comment = FindMaximum.this.getComment(&quot;Main.Initialization&quot;);"/>
</case>
<case label="4" comment="Условие">
<if test="d.max &lt; d.a[d.Main_i]">
<then>
<line value="comment = FindMaximum.this.getComment(&quot;Main.Cond.true&quot;);"/>
</then>
<else>
<line value="comment = FindMaximum.this.getComment(&quot;Main.Cond.false&quot;);"/>
</else>
</if>
<line>args = new Object[]{new Integer(d.a[d.Main_i]), new Integer(d.max)};</line>
</case>
<case label="6" comment="Обновление максимума">
<line value="comment = FindMaximum.this.getComment(&quot;Main.newMax&quot;);"/>
</case>
<case label="END_STATE" comment="Конечное состояние">
<line value="comment = FindMaximum.this.getComment(&quot;Main.END_STATE&quot;);"/>
<line>args = new Object[]{new Integer(d.max)};</line>
</case>
</switch>
<line>return java.text.MessageFormat.format(comment, args);</line>
</method>
<method header="public void drawState()" comment="Выполняет действия по отрисовке состояния">
<switch header="state">
<case label="START_STATE" comment="Начальное состояние">d.visualizer.updateArray(0, 0);</case>
<case label="1" comment="Инициализация">d.visualizer.updateArray(0, 0);</case>
<case label="4" comment="Условие">d.visualizer.updateArray(d.Main_i, 1);</case>
<case label="6" comment="Обновление максимума">d.visualizer.updateArray(d.Main_i, 2);</case>
<case label="END_STATE" comment="Конечное состояние">d.visualizer.updateArray(0, 0);</case>
</switch>
</method>
</class>
</class>
</file>
